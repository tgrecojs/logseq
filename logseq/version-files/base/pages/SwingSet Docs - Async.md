## Async
id:: 67a1e7cf-1faa-4855-9943-d82afaeb5227
	- ![Swing_Set_docs_Async.pdf](../assets/Swing_Set_docs_Async_1738662759946_0.pdf)
	- ### Notes
	- A vat (a unit of isolated execution in SwingSet) may restart or terminate before an asynchronous operation completes.
	- Underlying condition never satisfied: The condition required for the promise to settle may never occur.
	- Vat terminates, restarts, or upgrades before settlement: The promise will be severed if its decider vat terminates, restarts, or upgrades before it settles.
	- When programming with promises in SwingSet, ==**it's important to understand the temporality of promise settlement**==
	- Promises can be classified into three categories based on their temporality
		- ## Immediate
			- An Immediate promise is one that settles within the same Crank as its creation
			- All Immediate promises are also Prompt, but not all Prompt promises are Immediate.
			- #### Characteristics
				- Settlement Timing: **Settles within the same crank it was created.**
				- Dependencies: **Requires no additional input to the "vat"; all information is locally available.**
				- Safety: **Not aﬀected by vat restarts or upgrades, which occur in their own crank.**
				-
		- ## Prompt
			- A Prompt promise settles without requiring further input from outside SwingSet.
			- Prompt Promises settle without external input before any new I/O, making them safe from being severed by vat upgrades initiated by external events.
			- The following are examples of I/O that can prevent a promise from being Prompt (they "poison" promptness):
				- Waiting on a timer
				- Waiting on an inter-chain network call
				- Waiting on a bid being placed
				- Waiting on a new oracle price
			- #### Characteristics
				- Settlement Timing: **Settles before any new I/O is processed.**
				- Dependencies: **May involve multiple cranks but does not require external input.**
				- Safety: **Safe from being severed by vat upgrades initiated by external I/O.**
			- Do NOT affect Promptness
				- Upgrade:
					- cosmic-swingset ensures quiescence between I/O and vat upgrades are triggered only when processing a new item from the chain's action queue (such as network input).
				- Bridge Calls:
					- Bridge calls are Prompt. While the caller may subsequently wait for an acknowledgment input (which is not Prompt), the bridge call itself does not aﬀect promptness.
		- ## Delayed
			- A Delayed promise is one that requires additional input or external events to settle.
			- **It does not settle within the same crank** and depends on factors not available during the current run of SwingSet.
			- Delayed promises are neither Immediate nor Prompt because they involve waiting for external dependencies or future events beyond the current execution cycles.
			- Delayed Promises depend on external input or events and settle over future cranks, making them more vulnerable to disruptions like vat restarts or terminations.
			- #### Characteristics
				- Settlement Timing: S**ettles in future cranks after external events or inputs occur.**
				- Dependencies: **Requires external input or events outside of SwingSet to settle.**
				- Safety: **More susceptible to vat restarts, upgrades, or terminations aﬀecting their settlement**
			- ### Common Scenarios
				- Waiting on a Timer: **Introduces a delay until a speciﬁed time, relying on external scheduling.**
				- Waiting on External Data or Events: **Depends on input from outside the SwingSet environment, such as a new oracle price.**
				- User Actions: **Requires actions from external users, like placing a bid.**
				- Network Communications: **Involves waiting for responses from external systems or networks, such as inter-chain network call**
		- | **Promise Temporality** | **Description** |
		  | --- | --- |
		  | Immediate | settle within the same crank and are safe from vat restarts or upgrades during that crank. |
		  | Prompt | settle without external input before any new I/O, making them safe from being severed by vat upgrades initiated by external events. |
		  | Delayed | depend on external input or events and settle over future cranks, making them more vulnerable to disruptions like vat restarts or terminations.
- #### Question for Office Hours
	- From the ((67a1e7cf-1faa-4855-9943-d82afaeb5227)) Docs
		- > By being aware of the diﬀerences between Immediate, Prompt, and Delayed promises, you can design your smart contracts and applications to be more resilient and eﬃcient.
		- > By classifying your promises appropriately, you can better manage asynchronous operations and ensure the reliability of your SwingSet applications.
	- How can we take this information and use it to our benefit?
	- Are there patterns to look for?
- tags:: [[agoric sdk]], [[SwingSet]], [[Promises]]
-