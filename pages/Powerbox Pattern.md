- Overview
  public:: true
- ### tl;dr
	- A Powerbox is an object with extensive authority. At minimum, it must hold all the authority that any of the applications it might service might need.
	- At a minimum it must hold all the authority that any of the applications it might service might need.
	- **The powerbox is a composition of objects that grants, revokes, negotiates, and in general manages, the authorities granted to another object.**
- [[How Emily Tamed the Caml]]
- ## History:
	- The powerbox pattern was invented during the development of CapDesk and the DarpaBrowser; the experiences with building both a good (secure and flexible) powerbox and a poor (rigid yet breachable) powerbox led to a better understanding of the concept.
- ## Overview
	- The object to which a powerbox is assigned lies on the far side of a trust boundary, and the authorities for the differently-trusted object vary dynamically, at least on a session basis, or even during the session.
		- Powerbox is on the trusted side.
		- The powerbox must equip objects with whatever resources they need to properly carry out their job.
		- An object can have varying authority throughout its lifecycle. An object that sends a message to an API each time a program
		- To fulfill its job, an object may require
		- objects can change throughout an object's lifecycle.
		- New capabilities may be needed
		- object continues, capabilities
	- The powerbox itself must have extensive authority. As a minimum it must hold all the authority that any of the applications it might service might need. The powerbox then dynamically doles out these authorities based on POLA, to the actual instantiated application.
	- ### The Role of the Powerbox in Delegating Authority
		- > A Powerbox is an object with extensive authority.
		- The powerbox itself **must have extensive authority.**
			- At a minimum **it must hold all the authority that any of the applications it might service might need**.
			- The powerbox then dynamically doles out these authorities based on POLA, to the actual instantiated (live) application (objects).
		- Powersboxes can be dynamic
			- As a minimum it must hold all the authority that any of the applications it might service might need, however, 1342
			- The powerbox even negotiates with the user on the application’s behalf for additional authorities if the application finds itself unable to fulfill its obligations without more powers.
- ## Powerbox Construction
	- Modules in a powerbox
		- `powerbox`
			- contains all of the authorities that one would ever need to carry out a task.
			- in addition to holding these authorities, it is responsible for ensuring that an object is provided with the permissions it needs to function properly.
		- `main` module (start function)
			- the root module of a program.
			- it is through the `main` module that objects receive the permissions they need.
- ## Applying POLA to lockdown composable applications
	- ### Attack Scenario - Email Client
		- Consider a malicious JPEG image embedded in an email. The JPEG image, when read by the rendering engine will achieve a full breach of the renderer.
		- Because the renderer, as a part of the application, has all the application's authority, the attacker acquires both of the authorities needed to replicate itself:
			- **address book authority read**
			- **address book send authority**
				- ![image.png](../assets/image_1724247514739_0.png){:height 192, :width 296}
			-
		- > **Confinement at the application level is insufficient.**
	- ### Attack Mitigation
		- Address book Manager
			- has the authority to read the address book, but it does not have the authority to send or receive mail.
			- ✅ the address book manager is POLA-confined.
		- Malicious JPEG
			- now consider the rendering engine. The JPEG image, when displayed, still achieves full breach of the renderer. But the renderer has neither the authority to read the address book, nor the authority to send mail. The self-replicating JPEG attack fails.
			- ✅ the malicious JPEG is POLA-confined.
		- ### Conclusion
			- A virus needs to achieve two independent breaches of the system to replicate:
				- it must breach both the send module.
				- the address book manager.
- ### Tips for safer applications
	- Limit the size of modules.
	  logseq.order-list-type:: number
	- Limit number of modules that hold those authorities reduces risk of introducing a vulnerability.
	  logseq.order-list-type:: number
	- requiring multiple breaches increases the difficulty of exploiting a vulnerability
	  logseq.order-list-type:: number
- In the powerbox pattern... the “main” module of the application (where execution begins) hands out to each module just enough authority to do the job needed by that particular module. - [[How Emily Tamed the Caml]]
-
-